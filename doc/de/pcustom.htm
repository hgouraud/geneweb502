<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>GeneWeb - Anpassung von Seiten</title>
</head>
<body background="../images/gwback.jpg">
<table border=0 width="100%">
<tr>
<td>
<a href="http://www.geneweb.org/"><img width=96
height=108 src="../images/gwlogo.png" align=left border=0 alt=GeneWeb></a>
</td>
<td align=left>
<h1><font color=#2f6400>GeneWeb - Anpassung von Seiten</font></h1>
</td>
</tr>
</table>
</font>
<br><br>

Dieser Teil erkl&auml;rt, wie die Startseiten anzupassen und verwandte
Seiten hinzuzuf&uuml;gen sind. Er wurde geschrieben f&uuml;r Leute, die
<font color=#2f6400><b>GeneWeb</b></font> bereits verwendet haben und ins Detail gehen wollen.
<UL>
<LI>
<A HREF="#Wel">Startseite</A></LI>

<LI>
<A HREF="#Mac">Makros</A></LI>

<LI>
<A HREF="#Ass">Verbundene Seiten</A></LI>

<LI>
<A HREF="#All">Alle Seiten</A> anpassen</LI>
</UL>


<p>
<hr>

<h3><font color=#2f6400>
<A NAME="Wel"></A>Startseite</font></h3>
Die Startseite wird aus Textdateien zusammengebaut, den "start.txt"-Dateien,
die mit <font color=#2f6400><b>GeneWeb</b></font> geliefert werden. Es ist m&ouml;glich,
diese Dateien zu modifizieren und/oder eine spezifische Version f&uuml;r
eine spezielle Datenbank zu erstellen.

<P>Diese Dateien enthalten HTML gemischt mit "Makros" (siehe folgender
Abschnitt). Wenn du solche Dateien anlegen oder &auml;ndern m&ouml;chtest,
verwende keinen HTML-Editor, sondern einen normalen Texteditor.

<P>F&uuml;r die Startseite der Datenbank "bla" sucht <font color=#2f6400><b>GeneWeb</b></font> nach
den folgenden Dateien in dieser Reihenfolge:
<UL>
<LI>
bdir/lang/lg/bla.txt</LI>

<LI>
hdir/lang/lg/bla.txt</LI>

<LI>
bdir/lang/bla.txt</LI>

<LI>
hdir/lang/bla.txt</LI>

<LI>
bdir/lang/lg/start.txt</LI>

<LI>
hdir/lang/lg/start.txt</LI>

<LI>
bdir/lang/start.txt</LI>

<LI>
hdir/lang/start.txt</LI>
</UL>
wobei:
<UL>
<LI>
"bdir" = Wert von "-bd" des Befehls "gwd" (Default: aktuelles Verzeichnis).</LI>

<LI>
"hdir" = Wert von "-hd" des Befehls "gwd" (Default: aktuelles Verzeichnis).</LI>

<LI>
"lg" = aktuelle Sprache.</LI>
</UL>
Die Dateien "hdir/lang/lg/start.txt" werden mit der Distribution geliefert.
Der einfachste Weg, um eine angepa&szlig;te Datei zu erstellen, ist eine Kopie
der Datei "start.txt" zu machen, welche du &auml;ndern kannst wie du
willst. Wenn die Darstellung der Datei "start.txt" nicht gen&uuml;gt,
kann diese auch direkt ge&auml;ndert werden.

<P>Trotzdem eine Warnung: Von einer Version von <font color=#2f6400><b>GeneWeb</b></font> zur n&auml;chsten
kann es sein, da&szlig; die "start.txt"-Dateien verbessert worden sind.
Wenn du die neue Version nimmst und die Verbesserungen nutzen willst, schau
in die "start.txt"-Dateien um zu sehen, wo diese ver&auml;ndert worden
sind und erg&auml;nze die &Auml;nderungen in deinen angepa&szlig;ten Dateien.

<p>
<hr>

<h3><font color=#2f6400>
<A NAME="Mac"></A>Makros</font></h3>
Wie oben erw&auml;hnt, sind die Dateien der Startseiten kein pures HTML.
Sie enthalten "Makros". Das sind Sequenzen beginnend mit dem Zeichen
"%", gefolgt von einem Buchstaben. Beispiele: "%s", "%x", etc.

<P>Diese Makros werden ersetzt durch Werte, die vom Kontext abh&auml;ngen:
Name der Datenbank, Sprache, Zahl der Personen in der Datenbank etc.

<P>Au&szlig;erdem gibt es eine spezielle Verarbeitung f&uuml;r die Klammern
"[" und "]": der Text dazwischen wird aus dem Lexikon (Datei "lexicon.txt")
in die aktuelle Sprache umgesetzt mit folgenden &Auml;nderungen:
<UL>
<LI>
Wenn nach der &ouml;ffnenden Klammer ein Stern steht, wird der erste Buchstabe
der &Uuml;bersetzung gro&szlig; geschrieben.</LI>

<LI>
Wenn die schlie&szlig;ende Klammer von einer Zahl gefolgt wird, korrespondiert
diese mit dem N-ten Auftreten der &Uuml;bersetzung (beginnend mit 0), getrennt
durch Schr&auml;gstriche. Wenn die N-te &Uuml;bersetzung nicht existiert,
wird die erste verwendet.</LI>
</UL>
Um zu verstehen, wie die Makros verwendet werden, schaut man am besten
in die mitgelieferten "start.txt"-Dateien.

<P>Hier die Bedeutung der "%"-Makros:
<UL>
<LI>
<B>Datenbank.</B></LI>

<UL>
<LI>
"<TT><FONT SIZE=+1>%t</FONT></TT>": Name der Datenbank.</LI>

<LI>
"<TT><FONT SIZE=+1>%f</FONT></TT>": im Servermodus, Name der Datenbank
gefolgt von einem m&ouml;glichen Kennwort (Bsp.: "bla_xyzzy"); im CGI Modus
Name des CGI-Aufrufs (Bsp.: "gwd.exe").</LI>

<LI>
"<TT><FONT SIZE=+1>%g</FONT></TT>": im Servermodus wie "%f"; im CGI-Modus
Name des CGI-Kommandos gefolgt von "?b=", dem Namen der Datenbank und einem
Semikolon (Bsp.: "gwd.exe?b=bla;").</LI>

<LI>
"<TT><FONT SIZE=+1>%s</FONT></TT>": Wert von "%f" gefolgt von einem Fragezeichen
und Kontextvariablen (s.&nbsp;u.) gefolgt von einem Semikolon. Bsp.: "bla?lang=it;iz=8233;".</LI>
</UL>

<LI>
<B>Zahlen.</B></LI>

<UL>
<LI>
"<TT><FONT SIZE=+1>%c</FONT></TT>": Zahl der Zugriffe auf die Startseite.</LI>

<LI>
"<TT><FONT SIZE=+1>%q</FONT></TT>": Zahl der Anfragen.</LI>

<LI>
"<TT><FONT SIZE=+1>%d</FONT></TT>": Datum der ersten Abfrage.</LI>
</UL>

<LI>
<B>Bedingungen.</B></LI>

<UL>
<LI>
"<TT><FONT SIZE=+1>%w... %w</FONT></TT>": anzeigen falls "Wizard".</LI>

<LI>
"<TT><FONT SIZE=+1>%x... %x</FONT></TT>": anzeigen wenn "Wizard" oder "Freund".</LI>

<LI>
"<TT><FONT SIZE=+1>%y... %y</FONT></TT>": anzeigen wenn "Server"-Modus
(nicht CGI) und kein "Wizard".</LI>

<LI>
"<TT><FONT SIZE=+1>%z... %z</FONT></TT>": anzeigen wenn "Server"-Modus
(nicht CGI) und weder "Wizard" noch "Freund".</LI>

<LI>
"<TT><FONT SIZE=+1>%i... %i</FONT></TT>": anzeigen wenn CGI-Modus.</LI>
</UL>

<LI>
<B>Andere.</B></LI>

<UL>
<LI>
"<TT><FONT SIZE=+1>%r</FONT></TT>" gefolgt von einem Namen und einer neuen
Zeile: Einschlu&szlig; der Datei "name.txt".</LI>

<LI>
"<TT><FONT SIZE=+1>%b</FONT></TT>": Wert der Variablen "body_prop" der
Datei "bla.gwf" f&uuml;r die Datenbank "bla".</LI>

<LI>
"<TT><FONT SIZE=+1>%h</FONT></TT>": Kontextvariablen (s. u.) in der Form
"&lt;input type=hidden name=var value=val&gt;".</LI>

<LI>
"<TT><FONT SIZE=+1>%l</FONT></TT>": Sprache.</LI>

<LI>
"<TT><FONT SIZE=+1>%n</FONT></TT>": Anzahl von Personen in der Datenbank.</LI>

<LI>
"<TT><FONT SIZE=+1>%%</FONT></TT>": einzelnes "%".</LI>

<LI>
"<TT><FONT SIZE=+1>%[</FONT></TT>": "[".</LI>

<LI>
"<TT><FONT SIZE=+1>%]</FONT></TT>": "]".</LI>
</UL>
</UL>
Einige Makros beziehen sich auf&nbsp; <B>Kontextvariablen</B>. Das sind:
<UL>
<LI>
b: im CGI-Modus, Datenbankname.</LI>

<LI>
lang: Sprache.</LI>

<LI>
iz: Nummer der Person, die als Sosa-Referenz verwendet wird, falls vorhanden.</LI>
</UL>
Die <B>Bedingungen</B> k&ouml;nnen nicht &uuml;berlappen: Man kann kein
"<TT><FONT SIZE=+1>%w... %w</FONT></TT>" innerhalb eines "<TT><FONT SIZE=+1>%i...
%i</FONT></TT>" verwenden.

<p>
<hr>

<h3><font color=#2f6400>
<A NAME="Ass"></A>Verbundene Seiten</font></h3>
In die angepa&szlig;ten Startseiten kannst du Links zu verbundenen Dateien einf&uuml;gen,
die von <font color=#2f6400><b>GeneWeb</b></font> auf die gleiche Art und Weise behandelt werden:
Die Makros werden umgewandelt.

<P>Wenn du zum Beispiel eine spezielle Seite der ber&uuml;hmten Personen
deiner Datenbank erstellen willst, erzeuge eine Datei namens "famous.txt"
im Verzeichnis "bdir/lang/lg" oder im Verzeichnis "bdir/lang" (siehe erster
Abschnitt).

<P>Die Zugriffsanfrage nach "famous.txt" lautet: "m=H;v=famous". In der
Startseite tr&auml;gst du also ein:
<PRE>&nbsp;&nbsp; &lt;a href="%sm=H;v=famous">Beruehmte&lt;/a> Personen meiner
&nbsp;&nbsp; Datenbank.</PRE>
In die Datei "famous.txt" kannst Du Links zu Personen deiner Datenbank
einf&uuml;gen unabh&auml;ngig von deren Namen und Kontext unter Verwendung
der entsprechenden Makros.

<P>Die im einzelnen interessierenden Makros sind:
<UL>
<LI>
"<TT><FONT SIZE=+1>%b</FONT></TT>" kannst du in den "&lt;body>"-tag einf&uuml;gen
als "&lt;body%b>".</LI>

<LI>
"<TT><FONT SIZE=+1>%s</FONT></TT>" kannst du in Links verwenden.</LI>
</UL>
Beispielsatz in der Datei "famous.txt":
<PRE>&nbsp;&nbsp; Siehe meinen Cousin &lt;a href="%sp=louis;n=de+bourbon;oc=5">
&nbsp;&nbsp; Louis XIV&lt;/a> und meine
&nbsp;&nbsp; &lt;a href="%sem=R;ep=john;en=smith;m=NG;n=louis+xiv;t=PN">
&nbsp;&nbsp; Verwandtschaftsbeziehungen&lt;/a> zu ihm.</PRE>
Siehe auch: Wie man korrekte <A HREF="links.htm">Links</A> zu <font color=#2f6400><b>GeneWeb</b></font> 
Seiten machen kann.

<P>Beachte, da&szlig; die "erweiterte Anfrage" wie eine verbundene Datei namens
"advanced.txt" wirkt.

<p>
<hr>

<h3><font color=#2f6400>
<A NAME="All"></A>Alle Seiten anpassen</font></h3>

Alle Seiten, die Startseite eingeschlossen, k&ouml;nnen an drei Stellen angepasst werden:

<ul>

<li>Du kannst eine Datei namens <b>base.hed</b> (wobei "base" der Name
deiner Datenbank ist) erstellen, welche in allen Seiten als Kopf eingef&uuml;gt wird
(zwischen &lt;head&gt; und &lt;/head&gt;). Damit k&ouml;nnen z. B. style sheets
eingebunden werden. Speichere die Datei im Verzeichnis "lang" und/oder f&uuml;r einzelne
Sprachen "xy" im Verzeichnis "lang/xy".

<li>Auf die gleiche Art kannst du eine Datei namens <b>base.trl</b> anlegen, welche
nach dem <font color=#2f6400><b>GeneWeb</b></font> copyright auf jeder Seite erscheint.

<li>Schlie&szlig;lich kannst du noch die Variable <tt>body_prop</tt> in der Datei
<b>base.gwf</b> setzen, welche in das tag "&lt;body&gt;" aller Seiten
eingesetzt wird. Das ist n&uuml;tzlich, um Hintergrundfarbe oder -image anzugeben oder die
Farben der angezeigten Texte zu &auml;ndern. Siehe diesen <a href="start.htm#Cnf">Abschnitt
</a> des Kapitels "Erste Schritte mit <font color=#2f6400><b>GeneWeb</b></font>".

</ul>                                                                         

<p>
<hr>
<br>
<center>
Zur&uuml;ck zur <a href="diruse.htm">Gebrauchsanweisung</a>.
</center>

<p><hr><font size=-1><em>Copyright (c) 1998-2006 INRIA -
GeneWeb</em></font><br>

</body>
