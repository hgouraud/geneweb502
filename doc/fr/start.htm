<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>D&eacute;marrer avec GeneWeb</title>
</head>
<body background="../images/gwback.jpg">
<table border=0 width="100%">
<tr>
<td>
<a href="http://www.geneweb.org/"><img width=96
height=108 src="../images/gwlogo.png" align=left border=0 alt=GeneWeb></a>
</td>
<td align=left>
<h1><font color=#2f6400>D&eacute;marrer avec GeneWeb</font></h1>
</td>
</tr>
</table>
</font>
<br><br>

Ce chapitre contient une introduction &agrave; <b><font
color=#2f6400>GeneWeb</font></b>, avec une description succinte des
commandes et des fichiers afin de pouvoir d&eacute;marrer.

<p>

Attention: cette approche suppose que vous &ecirc;tes &agrave; l'aise
avec la notion de "fichier" et de "r&eacute;pertoire" et que vous
n'avez pas peur de taper des commandes; sinon, utilisez plut&ocirc;t
le programme <b><a href="gwsetup.htm">gwsetup</a></b>.

<p>

<ul>

<li> <a href="#Int">Introduction</a>

<li> <a href="#Gwc">Commande gwc</a>

<li> <a href="#Ged">Commande ged2gwb</a>

<li> <a href="#Gee">Commande gwb2ged</a>

<li> <a href="#Gwd">Commande gwd</a>

<li> <a href="#Csg">Commande consang</a>

<li> <a href="#Gwu">Commande gwu</a>

<li> <a href="#Cnf">Fichier a.gwf</a>

<li> <a href="#Lex">R&eacute;pertoire "lang" - fichier "lexicon.txt"</a>

<li> <a href="#Lng">R&eacute;pertoire "lang" - sous-r&eacute;pertoires</a>

</ul>
<hr>
<h3> <a name="Int"><font color=#2f6400>
Introduction</font></a> </h3>

Pour configurer et d&eacute;marrer <b><font color=#2f6400>GeneWeb</font></b>, vous devez
utiliser des commandes interactives. Sous Unix, lancez un
xterm. Sous Windows 95/NT, cliquez sur "D&eacute;marrer", "Programmes"
et "Invite de Commandes" (&ccedil;a s'appelle parfois "Commandes
MSdos").

<p>

Dans cette fen&ecirc;tre, tapez la commande pour aller dans le
r&eacute;pertoire o&ugrave; vous avez install&eacute;
<b><font color=#2f6400>GeneWeb</font></b>:

<ul>

<li> Sous Unix, si vous l'avez install&eacute; par exemple dans
"/home/smith/geneweb":
<pre>
     cd /home/smith/geneweb
</pre>

<li> Sous Windows 95/NT, si vous l'avez install&eacute; par exemple dans
"C:\soft\geneweb":
<pre>
     cd c:\soft\geneweb
</pre>

</ul>

Puis allez dans le sous-r&eacute;pertoire "gw", en tapant:

<pre>
     cd gw
</pre>

Toutes les commandes de <b><font color=#2f6400>GeneWeb</font></b> peuvent &ecirc;tre
lanc&eacute;es avec l'option -help qui affiche les diff&eacute;rentes
options possibles, avec une petite explication, en anglais.

<p>

Exemple, si vous tapez:
<pre>
     gwd -help
</pre>

vous devez voir quelque chose du genre:

<pre>
     Usage: gwd [options] where options are:
       -hd &lt;dir&gt;
	    Directory where the directory lang is installed.
       -bd dir&gt;
	    Directory where the databases are installed.
       -cgi 
	    Force cgi mode.
       -p &lt;number&gt;
	    Select a port number (default = 2317); &gt; 1024 for normal users.
       -wizard &lt;passwd&gt;
	    Set a wizard passord: access to all dates and updating.
       -friend &lt;passwd&gt;
	    Set a friend password: access to all dates.
       -lang &lt;lang&gt;
	    Set a default language (default: fr).
       -only &lt;address&gt;
	    Only inet address accepted.
       -auth &lt;file&gt;
	    Authorization file to restrict access. The file must hold lines
	    of the form "user:password".
       -log &lt;file&gt;
	    Redirect log trace to this file.
       -nolock 
	    Do not lock files before writing.
</pre>

<p>

Certaines commandes sont un peu bavardes. Vous pouvez rediriger leur
affichage dans un fichier en les terminant par "&gt;&nbsp;fichier".
Exemple:
<pre>
     gwd -help &gt; toto.txt
</pre>

<p>

Les bases de donn&eacute;es <b><font color=#2f6400>GeneWeb</font></b> sont des
r&eacute;pertoires avec l'extension ".gwb".

<hr>
<h3> <a name="Gwc"><font color=#2f6400>Commande gwc</font></a> </h3>

Pour utiliser <b><font color=#2f6400>GeneWeb</font></b>, vous devez cr&eacute;er une base de
donn&eacute;es. Vous pouvez le faire soit avec cette commande-ci,
"gwc", soit avec "ged2gwb", section suivante.

<p>

La commande "gwc", dans son utilisation la plus simple, cr&eacute;e
une base de donn&eacute;es vide: sous <b><font color=#2f6400>GeneWeb</font></b>, vous allez
pouvoir la remplir.

<p>

Vous devez donner un nom &agrave; cette base. N'importe quel nom
convient.  Ne d&eacute;passez pas, de pr&eacute;f&eacute;rence, 8
lettres.

<p>

Par exemple, si vous voulez l'appeler "dupont", tapez:
<pre>
     gwc -o dupont
</pre>

<hr>
<h3> <a name="Ged"><font color=#2f6400>
Commande ged2gwb </font></a> </h3>

Un autre moyen de cr&eacute;er une base de donn&eacute;es <b><font color=#2f6400>GeneWeb</font></b>
est de partir d'un fichier GEDCOM.

<p>

La commande "ged2gwb" vous permet de convertir un fichier GEDCOM en
base de donn&eacute;es <b><font color=#2f6400>GeneWeb</font></b>.

<p>

Le plus simple est d'abord de copier votre fichier GEDCOM dans le
r&eacute;pertoire o&ugrave; vous avez install&eacute;
<b><font color=#2f6400>GeneWeb</font></b>. Faites-le avec votre m&eacute;thode habituelle pour
copier des fichiers, soit avec une commande interactive, si
vous savez le faire, soit en d&eacute;pla&ccedil;ant les ic&ocirc;nes.

<p>

Si votre fichier GEDCOM s'appelle, par exemple, "toto.ged" et que vous
voulez cr&eacute;er une base de nom "dupont", tapez:

<pre>
     ged2gwb toto.ged -o dupont
</pre>

<p>

La commande est un peu bavarde, surtout si elle d&eacute;couvre des
erreurs dans le fichier GEDCOM. Ignorez ces erreurs dans un premier
temps: votre base sera quand m&ecirc;me fabriqu&eacute;e. Si tout se
passe bien, la commande doit se terminer par:

<pre>
     *** Ok
</pre>

<hr>
<h3> <a name="Gee"><font color=#2f6400>
Commande gwb2ged </font></a> </h3>

Avant de continuer, notons en passant la commande inverse, "gwb2ged",
permettant de reconstituer un fichier GEDCOM &agrave; partir d'une
base <b><font color=#2f6400>GeneWeb</font></b>.

<hr>
<h3> <a name="Gwd"><font color=#2f6400>
Commande gwd </font></a> </h3>

Une fois que vous avez cr&eacute;&eacute; une base, avec une des deux
commandes "gwc" ou "ged2gwb", vous allez pouvoir enfin la consulter et
l'&eacute;tendre.

<p>

Toujours dans la fen&ecirc;tre interactive, tapez simplement:

<pre>
     gwd
</pre>

<p>

Cette commande lance le "d&eacute;mon" <b><font color=#2f6400>GeneWeb</font></b>. La commande
doit afficher:

<pre>
     GeneWeb - Copyright (c) 1998-2006 INRIA
     Possible addresses:
	http://localhost:2317/base
	http://127.0.0.1:2317/base
	http://adresse:2317/base
     where "base" is the name of the database
     Type control C to stop the service
     Ready (jour) (heure) port 2317...
</pre>

<p>


Remarquez que vous ne reprenez pas la main dans la fen&ecirc;tre
interactive. Ce programme attend des requ&ecirc;tes que vous
allez lui faire par l'interm&eacute;diaire de votre navigateur
Web. Quand vous avez fini d'utiliser <b><font color=#2f6400>GeneWeb</font></b>, vous pouvez
l'arrÃªter en faisant control-C dans la fen&ecirc;tre
interactive.

<p>

Maintenant, on va pouvoir y aller. Puisque vous consultez cette
documentation, vous &ecirc;tes donc en train d'utiliser un navigateur
Web. Prenez une nouvelle fen&ecirc;tre dans ce navigateur et ouvrez la
location suivante. Remplacez "dupont" par le nom de votre base.
Attention: ne mettez pas le nom complet (style "c:\geneweb\gw\dupont" ou
"/home/geneweb/gw/dupont"), mais juste "dupont" tout court.

<pre>
     http://localhost:2317/dupont
</pre>

<p>

Vous devez voir appara&icirc;tre la page d'accueil de <b><font color=#2f6400>GeneWeb</font></b>.

<p>

[Si cela ne fonctionne pas, cliquez <a href="problem.htm">ici</a>]

<p>

<ul>
<li>
Si vous &ecirc;tes parti d'un fichier GEDCOM (ged2gwb), vous devez voir au
d&eacute;but le nombre de personnes de votre base.

<p>

&Agrave; partir de l&agrave;, vous pouvez consulter comme un service
Web classique, en cliquant sur les liens et les boutons, en
remplissant des zones, etc. Conseil: dans un premier temps, cliquez
sur le "Ok" apr&egrave;s "Tous les noms par ordre alphab&eacute;tique"
et, dans la page qui appara&icirc;tra, recliquez sur "Toute la
liste". S&eacute;lectionnez alors un nom, puis une personne, et
naviguez.

</ul>

<p>

<ul>

<li> Si vous &ecirc;tes parti d'une base vide (gwc), la page
d'accueil vous dira que la base contient 0 personnes.

<p>

La seule chose possible est de commencer &agrave; remplir la base en
cliquant sur "Ajouter une famille". Voyez le chapitre: comment faire
des <a href="update.htm">modifications</a> dans la base de
donn&eacute;es.

</ul>

<p>

Pendant ce temps, vous pouvez constater que chaque fois que vous
cliquez sur un bouton ou un lien, une trace apparait dans la
fen&ecirc;tre interactive. Quand vous ferez fonctionner votre
<a href="server.htm">serveur</a> <b><font color=#2f6400>GeneWeb</font></b> sur le
r&eacute;seau, vous pourrez ainsi voir les requ&ecirc;tes qui seront
faites sur votre base.

<p>

Notez que si vous tapez control-C dans la fen&ecirc;tre interactive,
le service ne r&eacute;pondra plus dans votre navigateur. Pour le relancer,
tapez simplement "gwd" de nouveau.

<p>

Sous Windows, vous pouvez simplement double-cliquer sur l'ic&ocirc;ne
de "gwd" pour le lancer. Cela ouvrira une fen&ecirc;tre
interactive o&ugrave; "gwd" affichera ses traces. En tapant
Control-C, "gwd" s'arr&ecirc;tera et la fen&ecirc;tre se fermera. En
cr&eacute;ant un raccourci de "gwd" sur le bureau, vous pourrez
l'utiliser de mani&egrave;re tr&egrave;s simple.

<hr>
<h3> <a name="Csg"><font color=#2f6400>
Commande consang </font></a> </h3>

Cette commande doit &ecirc;tre lanc&eacute;e dans la fen&ecirc;tre
interactive, comme les autres. Si le d&eacute;mon "gwd" tourne,
tapez control-c pour l'arr&ecirc;ter. Une autre solution, si vous ne
voulez pas arr&ecirc;ter le d&eacute;mon, consiste &agrave; lancer une
autre fen&ecirc;tre de commande interactive, en suivant
l'indication de l'introduction.

<p>

La commande "consang" calcule les consanguinit&eacute;s dans une base
de donn&eacute;es. L'affichage des consanguinit&eacute;s se fait
&agrave; la consultation de la base, dans les fiches personnelles, et
au moment des calculs de parent&eacute;.

<p>

Mais pour y avoir acc&egrave;s, il faut pr&eacute;calculer les
consanguinit&eacute;s individuelles des personnes de la base. C'est ce
que permet "consang". Si votre base s'appelle toujours "dupont",
tapez:

<p>

<pre>
     consang dupont
</pre>

<p>

Le programme va calculer quelques secondes ou minutes, suivant la
taille de votre base, en affichant sans arr&ecirc;t le nombre de
personnes restant &agrave; traiter. &Agrave; la fin, vous reprendrez
la main dans la fen&ecirc;tre interactive et les
consanguinit&eacute;s individuelles seront enregistr&eacute;es.

<p>

Pendant ce calcul, si vous n'avez pas arr&ecirc;t&eacute; le d&eacute;mon,
vous pouvez parfaitement retourner dans votre navigateur et consulter
votre base.

<p>

Lancez "consang" de temps en temps, si vous avez fait des
modifications dans votre base, surtout si ce sont des ajouts,
modications, suppressions de familles: la consanguinit&eacute;
d&eacute;pend de la structure des familles. Si celle-ci change, les
consanguinit&eacute;s individuelles ne sont plus valables et il faut
les recalculer.

<p>

En outre "consang" fait un "nettoyage" interne de votre base,
n&eacute;cessaire apr&egrave;s un certain nombre de mises &agrave;
jour.

<hr>
<h3> <a name="Gwu"><font color=#2f6400>
Commande gwu </font></a> </h3>

Cette commande permet d'afficher le contenu de la base sous forme de
texte. En redirigeant cet affichage vers un fichier, cela peut constituer
une sauvegarde de votre base.

<p>

Si votre base s'appelle "dupont", et que vous pouvez la sauvegarder dans
le fichier "toto.gw", tapez:

<p>
<pre>
     gwu dupont > toto.gw
</pre>

<p>

En sauvegardant dans des fichiers diff&eacute;rents, apr&egrave;s
avoir fait des modifications, vous pourrez ainsi comparer
diff&eacute;rentes versions de votre base, et voir les modifications
faites, en utilisant une commande de comparaisons de fichiers.  Ceci
est particuli&egrave;rement int&eacute;ressant si quelqu'un d'autre a
fait des modifications dans votre base.

<p>

C'est enfin une m&eacute;thode pour reconstituer votre base quand vous
prenez une nouvelle version de <b><font color=#2f6400>GeneWeb</font></b>, dans le cas o&ugrave;
la repr&eacute;sention interne des bases a chang&eacute;.

<p>

Pour reconstituer votre base, vous devez utiliser la commande "gwc". Le
fichier sauvegard&eacute; doit avoir obligatoirement l'extension ".gw".
Pour fabriquer une base de nom "durand" &agrave; partir du fichier "toto.gw"
ci dessus, tapez:

<p>
<pre>
     gwc toto.gw -o durand
</pre>

<hr>
<h3> <a name="Cnf"><font color=#2f6400>
Fichier a.gwf </font></a> </h3>

Ce fichier contient une configuration-type pour une base de donn&eacute;es.
Si votre base s'appelle "dupont", faites une copie de "a.gwf" en l'appelant
"dupont.gwf" et &eacute;ditez le fichier "dupont.gwf".

<p>

Les valeurs configurables sont les suivantes:

<ul><li> <strong>body_prop</strong> permet de configurer les couleurs
de fond, ou d'y mettre un motif et de changer la couleur du texte et
des liens. Sa syntaxe est la syntaxe HTML accept&eacute;e dans le tag
"&lt;body&gt;" avant le "&gt;". Voyez votre documentation
HTML. Exemple:

<pre>
     body_prop=background=monfond.jpg vlink=yellow
</pre>

<p>

Ceci s'applique non seulement &agrave; la page d'accueil mais &agrave;
toutes les pages affich&eacute;es de cette base.
</ul>

<p>

<ul><li> <strong>friend_passwd</strong> (mot de passe "ami") permet de
limiter la visibilit&eacute; des donn&eacute;es sur les personnes
encore vivantes, en fait sur toutes les personnes n&eacute;es ou
d&eacute;c&eacute;d&eacute;es depuis moins d'un si&egrave;cle.

<p>

Si vous mettez une valeur &agrave; ce champ, seulement les personnes
qui auront mis le mot de passe &agrave; partir de la page d'accueil
auront acc&egrave;s &agrave; ces donn&eacute;es.

</ul>

<p>

<ul><li> <strong>wizard_passwd</strong> (mot de passe "magicien")
permet de limiter le droit de faire des modifications dans votre base.

<p>

Si vous mettez une valeur &agrave; ce champ, seulement les personnes
qui auront mis le mot de passe &agrave; partir de la page d'accueil
auront acc&egrave;s aux modifications.

</ul>

<p>

<ul><li> <strong>wizard_just_friend</strong> ("magicien" seulement
"ami") permet d'interdire la mise &agrave; jour de la base. Mettez
"yes" pour le faire, "no" pour remettre l'autorisation. Il peut
&ecirc;tre utile de mettre "yes", temporairement, pendant la <a
href="maint.htm">nettoyage</a> de votre base.

</ul>

<p>

<ul><li> <strong>default_lang</strong> permet de sp&eacute;cifier une
langue par d&eacute;faut de la page d'accueil. Sans pr&eacute;cision,
la langue est le fran&ccedil;ais. Les valeurs possibles sont:

"af" (afrikaans),
"bg" (bulgare),
"br" (breton),
"cs" (tch&egrave;que),
"ca" (catalan),
"de" (allemand),
"da" (danois),
"en" (anglais),
"eo" (esp&eacute;ranto),
"es" (espagnol),
"et" (estonien),
"fi" (finlandais),
"fr" (fran&ccedil;ais),
"he" (h&eacute;breu),
"is" (islandais),
"it" (italien),
"lv" (letton),
"nl" (n&eacute;erlandais),
"no" (norv&eacute;gien),
"pl" (polonais),
"pt" (portugais),
"pt-br" (portugais br&eacute;silien),
"ro" (roumain),
"ru" (russe),
"sl" (slov&egrave;ne),
"sv" (su&eacute;dois),
"zh" (chinois),

<p>

Notez que, quelle que soit la langue s&eacute;lectionn&eacute;e par
d&eacute;faut, vous pouvez en choisir une autre dans la page d'accueil,
en cliquant dans son drapeau en haut de la page.

</ul>

<p>

<ul><li> <strong>can_send_image</strong> (peut envoyer des images)
permet d'autoriser les "magiciens" &agrave; envoyer (et supprimer) des
images. Dans ce cas, au moment des <a href="update.htm#MAJ">mises
&agrave; jour</a>, ils peuvent cliquer sur un lien <a
href="update.htm#SndP">envoyer image</a> (et &eacute;ventuellement un
autre intitul&eacute; <a href="update.htm#DelPh">supprimer
image</a>). Par d&eacute;faut, c'est "no" (on ne peut pas en envoyer);
pour l'autoriser, il faut mettre explicitement "yes".

<p>

Attention: les images seront enregistr&eacute;es sur votre ordinateur,
et peuvent donc consommer beaucoup d'espace disque, s'il y a beaucoup
d' images envoy&eacute;es.

</ul>

<p>

<ul><li> <strong>renamed</strong> (renomm&eacute;e) permet d'indiquer
qu'une base a &eacute;t&eacute; renomm&eacute;e. Si votre site a
beaucoup &eacute;te consult&eacute; et que votre base a
&eacute;t&eacute; mise dans beaucoup de signets de beaucoup de
personnes, c'est un moyen pour les rediriger vers votre base, avec son
nouveau nom. S'ils essaient d'acc&eacute;der &agrave; l'ancien nom,
ils verront une page avec un lien de la m&ecirc;me requ&ecirc;te vers
le nouveau nom.

</ul>

<hr>
<h3> <a name="Lex"><font color=#2f6400>
R&eacute;pertoire "lang" - fichier "lexicon.txt"</font></a> </h3>

Ce fichier contient le lexique. Pour chaque terme utilis&eacute; dans
le programme, il y a une traduction dans chaque langue. Si vous voulez
ajouter une langue, choisissez un code pour cette langue, et ajoutez
une ligne avec ce code pour chaque groupe de traduction des termes
que vous voyez dans le fichier.

<p>

De plus, si une des traductions propos&eacute;es dans une des langues
d&eacute;j&agrave; pr&eacute;sentes ne vous convient pas, vous pouvez la
changer.

<p>

Quand vous sauvegarderez le fichier "lexicon.txt", cela sera
imm&eacute;diatement visible &agrave; l'affichage dans le navigateur.
Il faudra tout de m&ecirc;me faire "recharger la page".

<hr>
<h3> <a name="Lng"><font color=#2f6400>
R&eacute;pertoire "lang" - sous-r&eacute;pertoires</font></a> </h3>

Chaque nom de sous-r&eacute;pertoire est un code de langue. Chacun
contient la page d'accueil dans cette langue: le fichier s'appelle
"start.txt".

<p>

Vous pouvez changer cette page d'accueil pour une base donn&eacute;e.
Pour la base "dupont", il vous suffit de cr&eacute;er un fichier
"dupont.txt" dans le ou les sous-r&eacute;pertoires de langues. Le
plus simple est de partir d'une copie du fichier "start.txt" du
sous-r&eacute;pertoire en question et de l'adapter.

<p>

Remarque: ces fichiers contiennent du code HTML avec des indications
particuli&egrave;res: des signes % suivis d'une lettre. Ce sont des
macros que "gwd" va remplacer par des valeurs. Par exemple, "%t" est
remplac&eacute; par le nom de la base, "%b" par la valeur de
"body_prop" du fichier de configuration, etc.

<p>

La description compl&egrave;te de ces macros est donn&eacute;e <a
href="pcustom.htm">ici</a>.

<p>
<hr>
<br>
<center>Retour vers <a href="diruse.htm">Mode d'Emploi</a></center>

<p><hr><font size=-1><em>Copyright (c) 1998-2006 INRIA -
GeneWeb</em></font><br>

</body>
